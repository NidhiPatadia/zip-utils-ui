<div class="main-content-url">
  <form [formGroup]="urlForm" (ngSubmit)="onSubmit(botGuard)" class="tool-box">
    <input
      id="url"
      name="url"
      type="text"
      formControlName="url"
      class="form-control text-url-input"
      placeholder="Paste your long URL here..."
      title="Paste your long URL here..."
    />

    <!-- Error message box -->
    <div
      *ngIf="
        urlForm.get('url')?.invalid &&
        (urlForm.get('url')?.touched || urlForm.get('url')?.dirty)
      "
      class="validation-error"
    >
      <div *ngIf="urlForm.get('url')?.errors?.['required']">
        URL is required.
      </div>
      <div *ngIf="urlForm.get('url')?.errors?.['pattern']">
        Please enter a valid URL.
      </div>
    </div>
    <div class="controls">
      <div class="control-row">
        <div class="control-group">
          <label for="expiry-select">Expiry Time:</label>
          <select id="expiry-select" formControlName="expiryTime">
            <option
              *ngFor="let expiryTime of expiryTimes"
              [value]="expiryTime.value"
            >
              {{ expiryTime.text }}
            </option>
          </select>
        </div>
        <div class="control-group">
          <app-custom-link
            #customLink
            (availabilityChange)="onSlugAvailabilityChange($event)"
            (slugChange)="onSlugChange($event)"
          ></app-custom-link>
        </div>
      </div>
      <app-bot-guard #botGuard></app-bot-guard>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="urlForm.invalid || isSlugAvailable === false"
      >
        Shorten URL
      </button>
    </div>
  </form>

  <div *ngIf="shortUrl">
    <app-copy-url-box [shortUrl]="shortUrl"></app-copy-url-box>
  </div>
  <app-loader-overlay
    *ngIf="loading"
    [message]="'Processing...'"
  ></app-loader-overlay>
</div>
<app-faq [items]="faqItems"></app-faq>
